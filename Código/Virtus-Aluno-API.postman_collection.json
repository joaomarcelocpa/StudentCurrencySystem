{
	"info": {
		"_postman_id": "virtus-aluno-collection-001",
		"name": "Virtus - Aluno API",
		"description": "Collection para testar endpoints de cadastro e login de alunos no sistema Virtus",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Alunos",
			"item": [
				{
					"name": "Cadastrar Aluno",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"joao.silva\",\n  \"senha\": \"senha123\",\n  \"nome\": \"João da Silva\",\n  \"email\": \"joao.silva@example.com\",\n  \"cpf\": \"12345678901\",\n  \"rg\": \"123456789\",\n  \"endereco\": \"Rua das Flores, 123, Bairro Centro, São Paulo - SP\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/cadastro",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"cadastro"
							]
						},
						"description": "Cadastra um novo aluno no sistema"
					},
					"response": []
				},
				{
					"name": "Cadastrar Aluno 2 - Maria",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"maria.santos\",\n  \"senha\": \"maria456\",\n  \"nome\": \"Maria dos Santos\",\n  \"email\": \"maria.santos@example.com\",\n  \"cpf\": \"98765432100\",\n  \"rg\": \"987654321\",\n  \"endereco\": \"Avenida Paulista, 1000, São Paulo - SP\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/cadastro",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"cadastro"
							]
						},
						"description": "Cadastra a aluna Maria dos Santos"
					},
					"response": []
				},
				{
					"name": "Cadastrar Aluno 3 - Pedro",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"pedro.oliveira\",\n  \"senha\": \"pedro789\",\n  \"nome\": \"Pedro Oliveira\",\n  \"email\": \"pedro.oliveira@example.com\",\n  \"cpf\": \"11122233344\",\n  \"rg\": \"111222333\",\n  \"endereco\": \"Rua Augusta, 500, Consolação, São Paulo - SP\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/cadastro",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"cadastro"
							]
						},
						"description": "Cadastra o aluno Pedro Oliveira"
					},
					"response": []
				},
				{
					"name": "Buscar Aluno por ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/alunos/{{aluno_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"{{aluno_id}}"
							]
						},
						"description": "Busca os dados do aluno por ID (requer autenticação)"
					},
					"response": []
				},
				{
					"name": "Consultar Saldo",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/alunos/{{aluno_id}}/saldo",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"{{aluno_id}}",
								"saldo"
							]
						},
						"description": "Consulta o saldo de moedas do aluno (requer autenticação)"
					},
					"response": []
				},
				{
					"name": "Consultar Extrato",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/alunos/{{aluno_id}}/extrato",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"{{aluno_id}}",
								"extrato"
							]
						},
						"description": "Consulta o extrato de transações do aluno (requer autenticação)"
					},
					"response": []
				},
				{
					"name": "Listar Resgates",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/alunos/{{aluno_id}}/resgates",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"{{aluno_id}}",
								"resgates"
							]
						},
						"description": "Lista todos os resgates de vantagens do aluno (requer autenticação)"
					},
					"response": []
				},
				{
					"name": "Atualizar Dados do Aluno",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"nome\": \"João da Silva Santos\",\n  \"email\": \"joao.silva.novo@example.com\",\n  \"endereco\": \"Rua das Flores, 456, Bairro Jardim, São Paulo - SP\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/{{aluno_id}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"{{aluno_id}}"
							]
						},
						"description": "Atualiza os dados do aluno (requer autenticação)"
					},
					"response": []
				},
				{
					"name": "Resgatar Vantagem",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{token}}",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"vantagemId\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/{{aluno_id}}/resgatar-vantagem",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"{{aluno_id}}",
								"resgatar-vantagem"
							]
						},
						"description": "Resgata uma vantagem usando as moedas do aluno (requer autenticação)"
					},
					"response": []
				}
			],
			"description": "Endpoints relacionados aos alunos"
		},
		{
			"name": "Autenticação",
			"item": [
				{
					"name": "Login Aluno",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"token\", jsonData.token);",
									"    pm.environment.set(\"aluno_id\", jsonData.id);",
									"    console.log(\"Token salvo: \" + jsonData.token);",
									"    console.log(\"Aluno ID salvo: \" + jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"joao.silva\",\n  \"senha\": \"senha123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Faz login no sistema e salva automaticamente o token JWT e ID do aluno"
					},
					"response": []
				},
				{
					"name": "Login Maria",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"token\", jsonData.token);",
									"    pm.environment.set(\"aluno_id\", jsonData.id);",
									"    console.log(\"Token salvo: \" + jsonData.token);",
									"    console.log(\"Aluno ID salvo: \" + jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"maria.santos\",\n  \"senha\": \"maria456\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login da Maria - salva automaticamente o token JWT e ID"
					},
					"response": []
				},
				{
					"name": "Login Pedro",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    pm.environment.set(\"token\", jsonData.token);",
									"    pm.environment.set(\"aluno_id\", jsonData.id);",
									"    console.log(\"Token salvo: \" + jsonData.token);",
									"    console.log(\"Aluno ID salvo: \" + jsonData.id);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"pedro.oliveira\",\n  \"senha\": \"pedro789\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Login do Pedro - salva automaticamente o token JWT e ID"
					},
					"response": []
				}
			],
			"description": "Endpoints de autenticação"
		},
		{
			"name": "Testes de Validação",
			"item": [
				{
					"name": "Cadastro - Login Muito Curto",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"ab\",\n  \"senha\": \"senha123\",\n  \"nome\": \"Teste\",\n  \"email\": \"teste@example.com\",\n  \"cpf\": \"12345678901\",\n  \"rg\": \"123456789\",\n  \"endereco\": \"Rua Teste, 123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/cadastro",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"cadastro"
							]
						},
						"description": "Deve retornar 400 - Login deve ter entre 3 e 100 caracteres"
					},
					"response": []
				},
				{
					"name": "Cadastro - Senha Muito Curta",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"teste\",\n  \"senha\": \"123\",\n  \"nome\": \"Teste\",\n  \"email\": \"teste@example.com\",\n  \"cpf\": \"12345678901\",\n  \"rg\": \"123456789\",\n  \"endereco\": \"Rua Teste, 123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/cadastro",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"cadastro"
							]
						},
						"description": "Deve retornar 400 - Senha deve ter no mínimo 6 caracteres"
					},
					"response": []
				},
				{
					"name": "Cadastro - Email Inválido",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"teste\",\n  \"senha\": \"senha123\",\n  \"nome\": \"Teste\",\n  \"email\": \"email-invalido\",\n  \"cpf\": \"12345678901\",\n  \"rg\": \"123456789\",\n  \"endereco\": \"Rua Teste, 123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/cadastro",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"cadastro"
							]
						},
						"description": "Deve retornar 400 - Email deve ser válido"
					},
					"response": []
				},
				{
					"name": "Cadastro - CPF Tamanho Incorreto",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"teste\",\n  \"senha\": \"senha123\",\n  \"nome\": \"Teste\",\n  \"email\": \"teste@example.com\",\n  \"cpf\": \"123\",\n  \"rg\": \"123456789\",\n  \"endereco\": \"Rua Teste, 123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/alunos/cadastro",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"cadastro"
							]
						},
						"description": "Deve retornar 400 - CPF deve ter 11 caracteres"
					},
					"response": []
				},
				{
					"name": "Login - Usuário Inexistente",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"usuario.inexistente\",\n  \"senha\": \"senha123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Deve retornar 401 - Credenciais inválidas"
					},
					"response": []
				},
				{
					"name": "Login - Senha Incorreta",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"login\": \"joao.silva\",\n  \"senha\": \"senhaerrada\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login"
							]
						},
						"description": "Deve retornar 401 - Credenciais inválidas"
					},
					"response": []
				},
				{
					"name": "Acesso Sem Token",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/alunos/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"alunos",
								"1"
							]
						},
						"description": "Deve retornar 403 - Acesso negado sem token"
					},
					"response": []
				}
			],
			"description": "Testes de validação e casos de erro"
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8080",
			"type": "string"
		}
	]
}